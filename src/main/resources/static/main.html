<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

    <style>
        .el-carousel__item h3 {
            color: #475669;
            font-size: 14px;
            opacity: 0.75;
            line-height: 150px;
            margin: 0;
        }

        .el-carousel__item:nth-child(2n) {
            background-color: #99a9bf;
        }

        .el-carousel__item:nth-child(2n+1) {
            background-color: #d3dce6;
        }

        .top_level{
            background-color: black;
            text-align: right;
        }

        .tab_express{
            background-color: blue;
        }

    </style>

</head>
<body style="margin: 0;">
<div id="app">
    <el-container>
        <el-header style="padding: 1px;">
            <div  class="top_level">
                <template v-if="userType == 'guest' ">
                    <el-button type="text" @click="goRegister">用户注册</el-button>
                    <el-button type="text" @click="login">用户登录</el-button>
                </template>
                <template v-if="userType == 'front' ">
                    <el-button type="text" @click="goPersonal">{{userName}}</el-button>
                    <el-button type="text" @click="logout">退出登录</el-button>
                </template>
            </div>
        </el-header>
        <el-main style="padding: 1px;">
            <el-row>
                <h3>我是logo</h3>
            </el-row>
            <el-row>
                <el-col :span="24">
                    <div>
                        <el-carousel trigger="click" height="250px">
                            <el-carousel-item v-for="item in 4" :key="item">
                                <h3>{{ item }}</h3>
                            </el-carousel-item>
                        </el-carousel>
                    </div>
                </el-col>
            </el-row>

            <el-row>
                <el-col :span="16" :offset="4">
                    <el-tabs v-model="tabs.activeName" @tab-click="handleClick">
                        <el-tab-pane label="FBA" name="fba">
                            <el-row>
                                <el-col :span="24" >
                                        <el-row :gutter="0">
                                            <el-col :span="2" style="text-align: right;margin: 10px auto;">取件地：</el-col>
                                            <el-col :span="10">
                                            <!--    <el-input placeholder="请输入内容"  v-model="searchParams.packageLocation"></el-input>-->
                                                <el-cascader
                                                        placeholder="试试搜索：省市区"
                                                        :options="originOpts"
                                                        :props="cascaderProps"
                                                        :clearable="true"
                                                        @change="handleOriginChange"
                                                        filterable
                                                ></el-cascader>
                                            </el-col>
                                            <el-col :span="2" style="text-align: right;margin: 10px auto;">目的地：
                                            </el-col>
                                            <el-col :span="10">
                                             <!--   <el-input placeholder="请输入内容" v-model="searchParams.destination"></el-input>-->
                                                <el-cascader
                                                        placeholder="试试搜索：国家地区"
                                                        :options="destOpts"
                                                        :props="cascaderProps"
                                                        :clearable="true"
                                                        @change="handleDestChange"
                                                        :show-all-levels="false"
                                                        filterable
                                                ></el-cascader>
                                            </el-col>
                                        </el-row>
                                        <el-row :gutter="0" style="margin-top:  10px;">
                                                <el-row>
                                                    <el-col  :span="2" style="text-align: right;margin: 10px auto;">
                                                        长：
                                                    </el-col>
                                                    <el-col  :span="2">
                                                        <el-input placeholder="请输入内容" v-model="searchParams.length"></el-input>
                                                    </el-col>
                                                    <el-col  :span="2" style="text-align: right;margin: 10px auto;">
                                                        宽：
                                                    </el-col>
                                                    <el-col  :span="2">
                                                        <el-input placeholder="请输入内容" v-model="searchParams.width"></el-input>
                                                    </el-col>
                                                    <el-col  :span="2" style="text-align: right;margin: 10px auto;">
                                                        高：
                                                    </el-col>
                                                    <el-col  :span="2">
                                                        <el-input placeholder="请输入内容" v-model="searchParams.height"></el-input>
                                                    </el-col>
                                                    <el-col  :span="2" style="text-align: right;margin: 10px auto;">
                                                        重量：
                                                    </el-col>
                                                    <el-col  :span="2">
                                                        <el-input placeholder="请输入内容" v-model="searchParams.weight"></el-input>
                                                    </el-col>
                                                    <el-col  :span="3" style="text-align: right;margin: 10px auto;">
                                                        同尺寸重：
                                                    </el-col>
                                                    <el-col  :span="4">
                                                        <el-input placeholder="请输入内容" v-model="searchParams.boxes"></el-input>
                                                    </el-col>
                                                    <el-col  :span="1" style="margin: 10px auto;">
                                                        箱
                                                    </el-col>
                                                </el-row>
                                        </el-row>
                                        <el-row :gutter="0" style="margin-top:  10px;">
                                            <el-col  :span="3">
                                                特殊物品：
                                            </el-col>
                                            <el-col  :span="21">
                                                <el-radio-group v-model="searchParams.specialItem">
                                                    <el-radio label="normal">普货</el-radio>
                                                    <el-radio label="outter">外置电(配套电)</el-radio>
                                                    <el-radio label="inner">内置电</el-radio>
                                                    <el-radio label="spin">纺织品</el-radio>
                                                </el-radio-group>
                                            </el-col>
                                        </el-row>
                                        <el-row :gutter="0" style="margin-top:  10px;">
                                            <el-col  :span="3">
                                                运输方式：
                                            </el-col>
                                            <el-col  :span="21">
                                                <el-radio-group  v-model="searchParams.deliverApproach">
                                                    <el-radio label="intelli">智能推荐</el-radio>
                                                    <el-radio label="deliveryExp">快递</el-radio>
                                                    <el-radio label="air">空派</el-radio>
                                                    <el-radio label="sea">海运</el-radio>
                                                    <el-radio label="railway">铁路</el-radio>
                                                    <el-radio label="zg">中港</el-radio>
                                                </el-radio-group>
                                            </el-col>
                                        </el-row>
                                        <el-row style="margin-top:  10px;">
                                            <el-col style="text-align: center;">
                                                <el-button type="primary" @click="search">全网查价</el-button>
                                            </el-col>
                                        </el-row >
                                </el-col>
                            </el-row>
                        </el-tab-pane>
                        <el-tab-pane label="商务快递" name="bizexpress">商务快递</el-tab-pane>
                    </el-tabs>
                </el-col>
            </el-row>

            <el-row>
                <el-col :span="24">
                    <div class="grid-content bg-purple-dark"></div>
                </el-col>
            </el-row>

        </el-main>

        <el-footer>

        </el-footer>

    </el-container>
</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<script src="https://unpkg.com/axios/dist/axios.js"></script>
<script>
    var data = {};
    data.tabs={activeName:"fba"};
    data.userType = 'guest';
    data.userName='游客';
    data.searchParams = {
        packageLocation: "",
        destination: "",
        length: "",
        width: "",
        height: "",
        weight: "",
        boxes: "",
        specialItem: "normal",
        deliverApproach: "intelli"
    };
    data.originOpts = [
       /* {
            value: 'shejiyuanze',
            label: '设计原则',
            children: [{
                value: 'yizhi',
                label: '一致'
            }, {
                value: 'fankui',
                label: '反馈'
            }, {
                value: 'xiaolv',
                label: '效率'
            }, {
                value: 'kekong',
                label: '可控'
            }]
        }*/
    ];

    data.destOpts = [
    ];

    data.cascaderProps = {
        "value":"id",
        "label":"name",
        "children":"children",
        "disabled":"selectable"
    };

    new Vue({
        el: '#app',
        data: data,
        methods: {
            handleClick(tab, event) {
                console.log(tab, event);
            },
            goRegister(){
                window.location.href="register.html";
            },
            login(){
                window.location.href="login.html";
            },
            goPersonal(){
                window.location.href="personal.html";
            },
            logout(){
                axios.get('/invalidateUser')
                    .then(function (response) {
                        console.log(response);
                        if(response.data.code == 1) {
                            data.userType = 'guest';
                            data.userName='游客';
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            search(){
                console.log('search ' + JSON.stringify(data.searchParams) );
            },
            handleOriginChange(val){
               // console.log(val);
                data.packageLocation = val[val.length -1];
            },
            handleDestChange(val){
                // console.log(val);
                data.destination = val[val.length -1];
            }
        }
    });

    axios.get('/validateUser')
        .then(function (response) {
            console.log(response);
            if(response.data.code == 1) {
                data.userType = "front";
                data.user = response.data.user;
                data.userName = data.user.account;
                doAfterLogin();
            }
        })
        .catch(function (error) {
            console.log(error);
        });


    function  doAfterLogin() {

    }
    
    (function (){
        axios.get('/get/originsAndDests')
            .then(function (response) {
                console.log(response);
                if(response.data.code == 1) {
                    data.originOpts =response.data.origins ;
                    data.destOpts =response.data.destinations;
                }
            })
            .catch(function (error) {
                console.log(error);
            });
    })();

</script>
</html>